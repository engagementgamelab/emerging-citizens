(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['global'] = template({"1":function(container,depth0,helpers,partials,data) {
    return "		    $('.body').addClass('game-bg group');\n		    $('#wrapper').addClass('group');\n		    $('.navbar.main').attr ('style', 'display:none;');\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "	  	sfxPath = '/sfx/'\n\n			// For countdown debugging\n	    var countdownPaused = false;\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "			'debug:pause',\n";
},"7":function(container,depth0,helpers,partials,data) {
    return "				\n				// GA include\n				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n			  ga('create', 'UA-64617433-4', 'auto');\n			  ga('send', 'pageview');\n\n";
},"9":function(container,depth0,helpers,partials,data) {
    return "\n				// For socket debugging\n				sessionStorage.debug = '*';\n\n";
},"11":function(container,depth0,helpers,partials,data) {
    return "\n				// $(document).ready(function() {\n\n					if (jQuery.browser.mobile)\n						return;\n\n					$('.home-page-info.coming-soon').click(function(evt) {\n						evt.preventDefault();\n						$(evt.currentTarget).addClass('invalid');\n\n						setTimeout(\n							function() {\n								$(evt.currentTarget).removeClass('invalid');\n							}, 1000);\n					});\n		 \n				// }); \n					\n";
},"13":function(container,depth0,helpers,partials,data) {
    return "\n";
},"15":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing;

  return "\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"group/monitor",{"name":"ifnoteq","hash":{},"fn":container.program(16, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n				// $(document).ready(function() {\n\n					// Get reference to main content div\n					gameContainer = $('#gameContent');\n\n					// GROUP VIEW\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"group",{"name":"ifeq","hash":{},"fn":container.program(18, data, 0),"inverse":container.program(20, data, 0),"data":data})) != null ? stack1 : "")
    + "\n					function templateLoad() {\n\n						var selected = $('#template_selector').find('option:selected');\n						var template = selected.val();\n						var templateData = selected.data('key');\n						var eventId = selected.data('event_id'); \n\n					  $.post( \n					  	\"/api/load/\",\n					  	{ template_path: template, debug_key: templateData, event_id: eventId },\n							function( data ) {\n\n							 	socketEvents(data.id, data.eventData);\n\n							 	if(typeof(gameEvents) == \"function\")\n									gameEvents(data.id, data.eventData);\n\n							}\n						);\n\n					}\n					$(\"#template_reload\").click(function() {\n\n						templateLoad();\n\n					});\n					$(\"#template_selector\").change(function() {\n\n						templateLoad();\n					\n					});\n					$(\"#countdowns_pause\").click(function(evt) {\n\n						var btn = $(evt.currentTarget);\n						socket.emit('debug:pause', emitData());\n\n						if(!$(btn).data('resume')) {\n							$(btn).text('resume countdowns');\n							$(btn).data('resume', 'true');\n						}\n						else {\n							$(btn).text('pause countdowns');\n							$(btn).data('resume', 'false');\n						}\n\n					});				\n					$(\"#generate_players\").click(function() {\n\n						$(\"#generate_players\").text('loading...');\n\n						$('#login').remove();\n						$('#emulate-players').fadeIn();\n						\n						$('#emulate-players iframe').attr('src', 'http://localhost:3000/play/debug');\n					});\n\n				// });\n";
},"16":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "\n					// Load animations\n"
    + ((stack1 = container.invokePartial(partials.player_animation,depth0,{"name":"player_animation","data":data,"indent":"\t\t\t\t\t","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "\n";
},"18":function(container,depth0,helpers,partials,data) {
    return "						\n			      $('.body').addClass('login');\n						$('.navbar.main').hide();\n\n						$('.voting-button').click(function(e) {\n\n							$(e.currentTarget).toggleClass('inactive');\n							$(e.currentTarget).toggleClass('active');\n\n						});\n\n						// Form click to begin game\n						$('#btn_submit').click(function(evt) {\n							var data = {};\n							/*data.contentCategories = $(\".form :input.active\").map(function(){\n																			    return $(this).val();\n																			 }).get();*/\n							data.accessCode = $('#access-code').text();\n\n						  $.post( \n						  	\"/api/create/\" + $(evt.currentTarget).data().type,\n								data,\n								function( data ) {\n\n									if(data.error_code !== undefined) {\n\n										if(data.error_code === 'need_content')\n											$('#session-create #categories').addClass('invalid');\n										\n										$('#session-create .error').text(data.msg).fadeIn();\n										\n										return;\n									}\n\n								  window.location = data;\n								}\n							);\n						});\n\n					 // PLAYER VIEW\n";
},"20":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "\n"
    + ((stack1 = container.invokePartial(partials.player_logic,depth0,{"name":"player_logic","hash":{"section":(depth0 != null ? depth0.section : depth0)},"data":data,"indent":"\t\t\t\t\t\t","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing;

  return "(function() {\n\n	//Checks if the site is being loaded on a mobile device\n	(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);\n\n		var socket;\n	  var gameCode;\n	  var gameEnded = false;\n		var gameContainer;\n\n	  var playerId;\n		var timeline = new TimelineLite();\n\n		\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"group/monitor",{"name":"ifeq","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n	  var sfxPath = 'https://res.cloudinary.com/engagement-lab-home/video/upload/v1/emerging-citizens/sfx/';\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.env : depth0),"development",{"name":"ifeq","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n	  // All possible socket event IDs\n	  // TODO: Change based on game type?\n		var eventIds = [\n\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"production",{"name":"ifnoteq","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n			'connect',\n			'disconnect',\n			'player:loggedin',\n			'player:reconnected',\n			'players:update',\n			'player:finished',\n\n			'game:tutorial',\n			'game:start',\n			'game:ending',\n			'game:ended',\n			'game:end',\n			'game:resumed',\n			'game:notfound',\n			'game:countdown',\n			'game:countdown_ending',\n			'game:countdown_end',\n			'game:round_over',\n			'game:replay',\n			\n			'hashtag:tryagain',\n			'hashtag:success',\n			'hashtag:voted',\n\n			'hashtags:received',\n			'hashtags:results',\n			'hashtags:reveal',\n		\n			'article:valid',\n			'article:random',\n			'article:tryagain',\n			'topic:info',\n			'wiki:click',\n			'wiki:results',\n			'wiki:waiting',\n\n			'meme:topic',\n			'meme:create',\n			'meme:tryagain',\n			'meme:received',\n			'meme:voting',\n			'meme:results',\n			'meme:voted',\n			'meme:liked'\n		\n		];\n\n		/* \n		 Associate provided data object with current game ID\n		*/\n		var emitData = function(data) {\n\n			if(gameCode === undefined && typeof(data.code) !== 'undefined')\n				gameCode = data.code;\n\n			return { gameId: gameCode, msgData: data };\n		\n		};\n\n		/* \n		 Obtains the embedded data ('data-key=\"something\"') object from the provided submit button\n		*/\n		var getFormData = function(submitElement) {\n\n			var pkg;\n\n			if(submitElement[0].dataset === undefined)\n				return undefined;\n			\n			try {\n				pkg = JSON.parse(submitElement[0].dataset.package);\n			}\n			catch(e) {\n				pkg = submitElement[0].dataset.package;\n			}\n\n			if($.isPlainObject(pkg)) {\n				$.each(Object.keys(pkg), function( key, value ) {\n\n					if(pkg[value] !== undefined)\n					  pkg[value] = $(pkg[value].toString()).val();\n\n				});\n			}\n			else if(!submitElement.is('button'))\n				pkg = $(pkg).val();\n\n			return pkg;\n\n		};\n\n		/* \n			Util to convert seconds to h:mm:ss\n		*/\n		var secondsToHms = function(d) {\n\n		  d = Number(d);\n		  var h = Math.floor(d / 3600);\n		  var m = Math.floor(d % 3600 / 60);\n		  var s = Math.floor(d % 3600 % 60);\n\n		  var hourDisplay = '<span id=\"h\">' + (h > 0 ? h + \":\" + (m < 10 ? \"0\" : \"\") : \"\") + '</span>';\n		  var minsDisplay = '<span id=\"m\">' + m + '</span>';\n		  var secondsDisplay = '<span id=\"s\">' + (s < 10 ? \"0\" : \"\") + s + '</span>';\n\n		  return (hourDisplay + minsDisplay + \":\" + secondsDisplay); \n\n		};\n\n		/* \n			Util to inject markup into game content container and run any callbacks\n		*/\n		var updateGameContent = function(content, callback) {\n\n			$('#top-header').remove();\n\n			var lobbyAnim = new TimelineLite();\n			lobbyAnim.to(gameContainer, .5, {x:'-100%', ease:Expo.easeInOut, onComplete:function() {\n\n				// Inject markup content and fire callback when done\n				gameContainer.html(content)\n										 .promise()\n										 .done(function(){\n										 		\n										 		if(callback)\n											 		callback();\n					\n												lobbyAnim.fromTo(gameContainer, .5, {x:'100%'}, {x:'0%', ease:Expo.easeInOut})\n\n										    // Hide loading\n										    $('#loading-modal').fadeOut(250);\n\n										 });\n\n			}})\n\n			if($('#top-header').length > 0) {\n				var topBar = $('#top-header').detach();\n				topBar.prependTo('body');\n			}\n		}\n\n		/*\n		    Hide/show loading modal\n		*/\n		var loadToggle = function(show, fast) {\n		 \n		    if(fast) {\n		        // Hide/show loading w/o anim\n		        $('#loading-modal').toggle(show);\n		    }\n		    else {\n		        // Hide/show loading\n		        $('#loading-modal').fadeTo(250, (show ? 1 : 0), 'easeInOutQuart');\n		    }\n\n		}\n\n		/* \n			Util to find font size of given length of text contents (WWDMM)\n		*/\n	  var getFontSize = function(txt) {\n\n	    var fontSize = 0;\n\n	    if (txt.length < 1) \n	        fontSize = 1;\n	    \n	    if (txt.length == 1) \n	        fontSize = 70;\n	    \n	    if (txt.length == 2) \n	        fontSize = 68;\n	    \n	    if (txt.length == 3) \n	        fontSize = 66;\n	    \n	    if (txt.length == 4) \n	        fontSize = 64;\n	    \n	    if (txt.length == 5) \n	        fontSize = 62;\n	    \n	    if (txt.length == 6) \n	        fontSize = 61;\n	    \n	    if (txt.length == 7) \n	        fontSize = 60;\n	    \n	    if (txt.length == 8) \n	        fontSize = 55;\n	    \n	    if (txt.length == 9) \n	        fontSize = 50;\n	    \n	    if (txt.length == 10)\n	        fontSize = 45;\n	   \n	    if (txt.length > 10)\n	        fontSize = Math.round(Math.max(((1 / (Math.pow(txt.length, 0.14285714285714285714285714285714))) * 50 + 10), 14));\n	   \n	    if (txt.length > 20)\n	        fontSize = Math.round(Math.max(((1 / (Math.pow(txt.length, 0.125))) * 40 + 13), 14));\n	   \n	    if (txt.length > 90)\n	        fontSize = Math.round(Math.max(((1 / (Math.pow((txt.length - 80), 0.125))) * 40 + 5), 14));\n	   \n	    if (txt.length > 206)\n	        fontSize = Math.round(Math.max(((1 / (Math.pow((txt.length - 160), 0.125))) * 40 + 2), 14));\n\n	    return fontSize;\n\n	  }\n\n		// Detect if browser is in private/ingonito mode and if so, prevent any execution and show warning message\n		detectPrivateMode(function(isPrivate) {\n			\n			if(isPrivate) {\n\n				$('.form .error').text('You cannot play in private/incognito browsing mode. Please try again in a non-private window or tab.');\n\n				// $(document).ready(function() {\n			    var errorAnim = new TimelineLite();\n			    errorAnim\n			    .to($('#access_code'), 1.5, {xPercent:-200, display:'none', autoAlpha:0, ease:Elastic.easeOut}, .1)\n			    .to($('#player_name'), 1.5, {xPercent:200, display:'none', autoAlpha:0, ease:Elastic.easeOut}, .2)\n			    .to($('#btn_submit_code'), 1, {yPercent:120, display:'none', autoAlpha:0, ease:Elastic.easeOut}, .3)\n			    .fromTo($('.form .error'), 1, { scale: 2.5, opacity:0 }, { scale: 1, opacity: 1, display: 'block', ease:Bounce.easeOut});\n				// });\n				\n				return;\n			\n			}	\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"production",{"name":"ifeq","hash":{},"fn":container.program(7, data, 0),"inverse":container.program(9, data, 0),"data":data})) != null ? stack1 : "")
    + "			\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"index",{"name":"ifeq","hash":{},"fn":container.program(11, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"comingsoon",{"name":"ifeq","hash":{},"fn":container.program(13, data, 0),"inverse":container.program(15, data, 0),"data":data})) != null ? stack1 : "")
    + "\n\n		});\n\n})();";
},"usePartial":true,"useData":true});
templates['groupview_events'] = template({"1":function(container,depth0,helpers,partials,data) {
    return "                    $('.body').addClass('wikigeeks');\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "            case 'debug:pause':\n                countdownPaused = !countdownPaused;\n\n                break;\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "release";
},"7":function(container,depth0,helpers,partials,data) {
    return "js";
},"9":function(container,depth0,helpers,partials,data) {
    var helper;

  return "        .done(function( script, textStatus ) {\n            var startBtn = $('#btn-start-game');\n            startAnim.from(startBtn, 1, {scale:0, autoAlpha:0, ease:Elastic.easeOut});\n        })\n        .fail(function( jqxhr, settings, exception ) {\n            console.error('Unable to load %s (error: \"%s\")', '"
    + container.escapeExpression(((helper = (helper = helpers.gameType || (depth0 != null ? depth0.gameType : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"gameType","hash":{},"data":data}) : helper)))
    + ".js', exception);\n        });\n\n    ";
},"11":function(container,depth0,helpers,partials,data) {
    return ";\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing;

  return "\nif (jQuery.browser.mobile) {\n    showErrorModal(true, 'mobile');    \n    return;\n}\n\nvar clockInterval;\nvar startAnim = new TimelineLite({paused: true});\n\nvar socketEvents = function(eventId, eventData) {\n    \n    switch (eventId) {\n\n        case 'connect':\n\n			   // Connected, let's sign-up for to receive messages for this room\n               $('#startGameForm').css('padding', '1%');\n               \n			   socket.emit('room', emitData('moderator'));\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.gameType : depth0),"wikigeeks",{"name":"ifeq","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "               \n            break;\n\n        case 'disconnect':\n\n            console.log('--- Server disconnect: %s ---', eventData);\n\n            if(gameEnded)\n                return;\n\n            $('#error-disconnected').fadeIn(function() {\n                $('#error-disconnected #text').css('top', '0');\n            });\n\n            break;\n\n        case 'players:update':\n\n            var staticPlayers = $('.player-static');\n            var currentPlayers = _.pluck(eventData.players, 'username');\n\n            // Allow to start?\n            if(currentPlayers.length >= 2)\n                startAnim.play();\n            else\n                startAnim.reverse();\n\n                _.each(staticPlayers, function(player, index) {\n\n                    // TODO: Handle visual of players leaving mid-game\n                    // if(eventData.state === 'lost_player') {\n\n                    //     if(!currentPlayers[index]) {\n                    //         $(player).children('.icon').removeClass('active');\n                    //         $(player).children('.nameplate').removeClass('active');\n                    //     }\n\n                    // }\n                    // else {\n                        \n                        if(currentPlayers[index]) {\n\n                            var name = currentPlayers[index];\n                            var nameFormatted = (name.length <= 15) ? name : name.substring(0, 15) + \"...\";\n\n                            $(player).children('.nameplate').text(nameFormatted);\n\n                            if(eventData.state !== 'lost_player') {\n                                $(player).children('.icon').addClass('active');\n                                $(player).children('.nameplate').text(nameFormatted).addClass('active');\n                            }\n\n                        }\n                        else {\n\n                            $(player).children('.icon').removeClass('active');\n                            $(player).children('.nameplate').removeClass('active');\n\n                        }\n\n                    // }\n\n                });\n\n            break;\n\n        case 'game:tutorial':\n            \n            $('#overlay').html(eventData).fadeIn();\n            \n            // Show countdown\n            var secondsLeft = 8;\n            var circle = new ProgressBar.Circle('#countdown', {\n                color: '#fff',\n                duration: 8000,\n                easing: 'easeInOut',\n                strokeWidth: 6,\n                trailColor: '#f4f4f4',\n                trailWidth: 0.8,\n                fill: '#00c5c2',\n                text: {\n                    value: '8',\n                    className: 'text',\n                }\n            });\n\n            $('#countdown').click(function() {\n                $('#overlay').fadeOut();\n            });\n\n            var tutorialCountdown = setInterval(function() {\n                secondsLeft--;\n\n                $('#countdown .text').text(secondsLeft);\n\n                // End countdown and show arrow to continue\n                if(secondsLeft == 0) {\n                    clearInterval(tutorialCountdown);\n\n                    var icon = $('#continue .icon').detach();\n                    $('#countdown .text').empty();\n                    icon.appendTo($('#countdown .text'));\n                    \n                    var continueAnim = new TimelineMax({ paused:true });\n                    continueAnim\n                    .from(icon, 1.5, {scale: 0, autoAlpha: 0, ease: Bounce.easeOut })\n                    .from(icon, 1, {x: '+20', repeat: -1, yoyo: true, ease: Expo.easeOut });\n                    // .to($('#countdown'), 1, {scale: 2, ease: Bounce.easeOut })\n                    // .from($('#countdown'), 1, {scale: 2, ease: Bounce.easeOut, delay: 1 });\n\n                    continueAnim.play();\n                }\n            }, 1000);\n\n            circle.animate(1);\n\n            break;\n\n        case 'game:start':\n\n            updateGameContent(eventData.html);\n\n            break;\n\n        case 'game:ended':\n\n            gameEnded = true;\n\n            showErrorModal(true, 'ended');\n\n            break;\n            \n        case 'game:countdown':\n\n            if(clockInterval)\n                clearInterval(clockInterval);\n\n            break;\n\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"production",{"name":"ifnoteq","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n        default:\n\n            console.warn('No groupview handler found for event \"' + eventId + '\"');\n\n            break;\n\n    }\n    \n};\n\n// Get events script for the game type logged in to\n$.getScript( '/"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"development",{"name":"ifnoteq","hash":{},"fn":container.program(5, data, 0),"inverse":container.program(7, data, 0),"data":data})) != null ? stack1 : "")
    + "/events/group/"
    + container.escapeExpression(((helper = (helper = helpers.gameType || (depth0 != null ? depth0.gameType : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"gameType","hash":{},"data":data}) : helper)))
    + ".js' )\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"production",{"name":"ifnoteq","hash":{},"fn":container.program(9, data, 0),"inverse":container.program(11, data, 0),"data":data})) != null ? stack1 : "");
},"useData":true});
templates['player_animation'] = template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "\nfunction playerEntry() {\n\n	var animTiming = [.5, .6, .7, .8];\n	var entryButtons = $('.gameLanding a');\n	\n  _.each(entryButtons, function(el, index) {\n\n		timeline.add(TweenMax.fromTo(el, animTiming[index], {scale:0}, {scale:1, ease:Elastic.easeOut}));\n\n  });\n  timeline.play();\n\n}";
},"useData":true});
templates['player_events'] = template({"1":function(container,depth0,helpers,partials,data) {
    return "release";
},"3":function(container,depth0,helpers,partials,data) {
    return "js";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "\nvar cachedEventId;\nvar cachedEventData;\nvar gameEnded = false;\n\nvar resetSession = function() {\n\n    // Remove saved game code, submission, and set to not reconnected\n    sessionStorage.removeItem('gameCode');\n    sessionStorage.removeItem('playerSubmission');\n    sessionStorage.setItem('reconnected', false);\n\n}\n\nvar getScript = function(gameType) {\n\n    $.getScript( '/"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || helpers.helperMissing).call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.environment : depth0),"development",{"name":"ifnoteq","hash":{},"fn":container.program(1, data, 0),"inverse":container.program(3, data, 0),"data":data})) != null ? stack1 : "")
    + "/events/' + gameType + '.js' )\n        .done(function( script, textStatus ) {\n            // If any event is waiting to be called, do it now\n            if(cachedEventId) {                \n                socketEvents(cachedEventId, cachedEventData);\n                gameEvents(cachedEventId, cachedEventData);\n            }\n          })\n          .fail(function( jqxhr, settings, exception ) {\n            console.error('Unable to load %s (error: \"%s\")', gameType + '.js', exception);\n        });\n\n}\n\n$(\"#player_name\").keydown(function(event) {\n    \n    if(event.keyCode == 13)\n        $('#btn_submit_code').click();\n\n});\n\nvar socketEvents = function(eventId, eventData) {\n\n    // Wait for load defined if player is reconnected, so client can load needed logic before event is called\n    if(eventData && eventData.waitForLoad)\n    {\n        cachedEventId = eventId;\n        cachedEventData = eventData.html;\n\n        return;\n    }\n\n    switch (eventId) {\n\n        case 'connect':\n\n            // Connected, let's sign-up for to receive messages for this room\n            socket.emit('room', emitData('player'));\n            \n            break;\n\n        case 'disconnect':\n\n            console.log('--- Server disconnect: %s ---', eventData);\n\n            if(gameEnded)\n                return;\n\n            // Remove saved sesh\n            resetSession();\n\n            $('#error-disconnected').fadeIn(function() {\n                $('#error-disconnected #text').css('top', '0');\n            });\n\n            document.title = 'Emerging Citizens';\n\n            break;\n\n        case 'player:loggedin':\n\n            updateGameContent(eventData.html);\n\n            sessionStorage.setItem('gameType', eventData.gameType);\n            sessionStorage.setItem('reconnected', false);\n\n            getScript(sessionStorage.gameType);\n\n            $('#waiting .game-message span').text('waiting for game to begin...');\n\n            $('#debug-info').text('Player id: ' + eventData.id);\n\n            playerId = eventData.id;\n\n            document.title = 'EC: ' + playerName;\n\n            break;\n\n        case 'player:reconnected':\n            \n            // Get events script for the game type logged in to\n            getScript(sessionStorage.gameType);\n\n            // Set local player state as reconnected\n            sessionStorage.setItem('reconnected', true);\n            \n            break;\n\n        case 'game:start':\n\n            // Save current game code to local storage\n            sessionStorage.setItem('gameCode', gameCode);\n\n            updateGameContent(eventData);\n\n            // Change background\n            $('.body').addClass('player');\n\n            break;\n\n        case 'game:ending':\n\n            $('#error-box').text(eventData);\n            $('#error-box').show();\n\n            break;\n\n        case 'game:ended':\n\n            gameEnded = true;\n\n            // Remove saved sesh\n            resetSession();\n\n            updateGameContent(eventData);\n                \n            // Send player back to login after 5s\n            setTimeout(function() {\n                window.location = window.location;\n            }, 5000);\n\n            document.title = 'Game ended!';\n\n            break;\n\n        case 'game:resumed':\n\n            $('#error-box').hide();\n\n            break;\n\n        case 'game:notfound':\n\n            // $('#error-box').text('game not found!');\n            // $('#error-box').show();\n\n            // Game not found, make sure form is visible\n            $('#resuming').hide();\n            $('.form').show();\n\n            // If player was in a game (has code), tell them they were disconnected/game ended\n            // Otherwise player is at login, tell them game ended\n            if(sessionStorage.getItem('gameCode')) {\n                updateGameContent(eventData);\n                \n                // Send player back to login after 5s\n                setTimeout(function() {\n                    window.location = '/play';\n                }, 5000);\n            }\n            else\n                $('.form .error').text('Game has ended, please try again.').fadeIn();\n\n                \n            // Reset saved sesh\n            resetSession();\n\n\n            break;\n\n        case 'game:countdown_ending':\n\n            $('.form .error').fadeIn().html(eventData);\n\n            break;\n\n        case 'game:round_over':\n\n            if(eventData.html)\n                updateGameContent(eventData.html);\n            else\n                updateGameContent(eventData);\n\n            var nextRoundAnim = new TimelineLite({ paused:true , onComplete:function() {}});\n            nextRoundAnim.from($('#nextRound'), 2.5, { scale: 0, opacity:0, ease:Elastic.easeOut }, { scale: 1, opacity: 1, display: 'block'});\n            nextRoundAnim.play();\n\n            if (eventData.data && eventData.data.last_round)\n                resetSession();\n            else\n                sessionStorage.removeItem('playerSubmission');\n\n            break;\n\n        case 'game:end':\n        case 'players:update':\n\n            updateGameContent(eventData.html);\n\n            break;\n\n        default:\n\n            console.warn('No handler found for event \"' + eventId + '\" in socketEvents.');\n\n            break;\n\n    }\n\n};";
},"useData":true});
templates['player_logic'] = template({"1":function(container,depth0,helpers,partials,data) {
    return "    window.smartlook||(function(d) {\n        var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];\n        var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';\n        c.charset='utf-8';c.src='//rec.getsmartlook.com/recorder.js';h.appendChild(c);\n        })(document);\n        smartlook('init', 'f70bc72265f75e886b23785202aafc01c9b5c2e1');\n\n    // Warn about reloading\n    window.addEventListener(\"onbeforeunload\", function (e) {\n\n      (e || window.event).returnValue = null;\n      return null;\n\n    });\n";
},"3":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "\n    console.log('section',section)\n\n    // Show or hide error about various game error states\n    var showErrorModal = function(show, textType) {\n\n        var showing = !$('#gameContent').is(':visible');\n\n        // Exit?\n        if( show && showing ||\n            !show && !showing )\n            return;\n\n        // Fade game content in or out\n        $('#gameContent').fadeTo(\"fast\", (show ? 0 : 1), function() {\n\n            // Hide/show game content\n            $(this).css('display', (show ? 'none' : 'block'));\n\n            if(show) {\n                // Reset zoom\n                $('body').css('zoom', 1);\n            }\n\n            $('#error-modal').fadeTo(\"fast\", (show ? 1 : 0), function() {\n                \n                $('#error-modal #text h2').hide();\n\n                // Show correct msg\n                $('#error-modal #text #' + textType).show();\n                $('#error-modal #text').css('top', (show ? 0 : '-100%'));\n                \n                // Hide/show error    \n                $(this).css('display', (show ? 'block' : 'none'));\n\n            });\n\n        });\n\n    };\n\n    // Open socket connection\n    socket = io();\n    registerEvents();\n\n    gameCode = '"
    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.game : depth0)) != null ? stack1.accessCode : stack1), depth0))
    + "-group'; \n\n    // Thanks GOTA\n    function doResize() {\n        \n        if (jQuery.browser.mobile)\n            return;\n      \n        var scale = Math.min(\n            $(window).outerWidth() / 1680, 1.0\n        );\n\n        // If screen too small, show error saying so\n        if($(window).outerWidth() < 1024)\n            showErrorModal(true, 'size');\n        else {\n            showErrorModal(false, 'size');\n            // Apply zoom\n            $('body').css('zoom', scale);\n        }\n\n\n    }\n    // Scale screen as window is resized\n    $(window).resize(function() {\n         doResize();\n    });\n    doResize();\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || helpers.helperMissing).call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.debug : depth0),true,{"name":"ifeq","hash":{},"fn":container.program(4, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n    // Load events for group\n"
    + ((stack1 = container.invokePartial(partials.groupview_events,depth0,{"name":"groupview_events","hash":{"gameType":(depth0 != null ? depth0.gameType : depth0)},"data":data,"indent":"    ","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "\n";
},"4":function(container,depth0,helpers,partials,data) {
    return "        // Debugging view\n        $('#debugging').appendTo('body');\n";
},"6":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "\n    // Load events for players\n"
    + ((stack1 = container.invokePartial(partials.player_events,depth0,{"name":"player_events","hash":{"gameType":(depth0 != null ? depth0.gameType : depth0)},"data":data,"indent":"    ","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || helpers.helperMissing).call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.debug : depth0),true,{"name":"ifeq","hash":{},"fn":container.program(7, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n";
},"7":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "        // Debugging view\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || helpers.helperMissing).call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.section : depth0),"play",{"name":"ifeq","hash":{},"fn":container.program(8, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"8":function(container,depth0,helpers,partials,data) {
    return "            $('#access_code').val('TEST');\n            $('#player_name').val('Player_' + Math.floor(Math.random() * (10 - 1 + 1)) + 1);\n";
},"10":function(container,depth0,helpers,partials,data) {
    return "        \n        socket.on('connect_timeout', function() {\n           console.warn('Client timed out when connecting.');\n        });\n        socket.on('disconnect', function() {\n           console.warn('Client was disconnected!');\n        });\n        socket.on('reconnecting', function() {\n           console.log('Reconnecting.');\n        });\n        socket.on('reconnect_attempt', function() {\n           console.log('Trying to reconnect!');\n        });\n        socket.on('reconnect_error', function(err) {\n           console.error('Reconnect error: %s', err);\n        });\n\n        console.log('Connecting to game \"' + gameCode + '\".');\n\n";
},"12":function(container,depth0,helpers,partials,data) {
    return "\n                $('#last-event').text('last event: ' + id);\n\n                console.log(\"EVENT ID: \", id);\n\n";
},"14":function(container,depth0,helpers,partials,data) {
    return "\n    playerEntry();\n\n    $(document).on('click', '.btn.game_entry', function() {\n        \n        var type = $(this).data().game;\n\n        $.get( \n            \"/game/get/\" + type,\n            function( data ) {\n\n                $('#gameContent').html(data);\n\n                $('.form input[type=submit]')\n                .hover(function(evt) {\n\n                    timeline.to(evt.currentTarget, .5, { ease: Elastic.easeOut, scale:1.2 });\n\n                })\n                .mouseleave(function(evt) {\n\n                    timeline.from(evt.currentTarget, .5, { scale:1.2 });\n\n                });\n\n            });\n                \n    });\n\n";
},"16":function(container,depth0,helpers,partials,data) {
    return "\n  $('.body').addClass('game-bg');\n  $('.body').addClass('player');\n\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "\nvar isEmulated = window.frameElement && window.frameElement.getAttribute('data-emulated');\n\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"development",{"name":"ifnoteq","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n// Do not enable sound for emulated (debug) player\nif(!isEmulated) {\n\n    ion.sound({\n    sounds: [\n        {\n            name: \"button_tiny\"\n        }\n    ],\n    volume: 0.5,\n    path: sfxPath,\n    preload: true,\n    ready_callback: function(obj) { console.log('sounds ready', obj); }\n    });\n\n}\nelse\n    $('#debugging').remove();\n\n/*\n    Logs the player in\n*/\nvar playerLogin = function(data) {\n\n    gameCode = data.code;\n\n    $('.navbar').slideUp();\n    \n    // Open socket connection\n    if(!socket) {\n        socket = io('//"
    + alias4(((helper = (helper = helpers.host || (depth0 != null ? depth0.host : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"host","hash":{},"data":data}) : helper)))
    + "', {'reconnection': true,'reconnectionDelay': 500,'maxReconnectionAttempts':Infinity});\n        registerEvents();\n    }\n\n    playerName = $('#player_name').val();\n    sessionStorage.setItem('username', playerName);\n\n    // Log player in\n    socket.emit('login:submit', emitData({username: playerName, uid: data.uid}));\n\n}\n\n/*\n    Checks if this client is logged in as a player already\n*/\nvar checkIfLoggedIn = function() {\n    \n    // Check if game code saved to session (player is already logged in)\n    if(!sessionStorage.getItem('gameCode')) {\n        $('.form').show();\n        return;\n    }\n\n    $('#resuming').show();\n\n    gameCode = sessionStorage.getItem('gameCode');\n    \n    // Open socket connection\n    if(!socket) {\n        socket = io('//"
    + alias4(((helper = (helper = helpers.host || (depth0 != null ? depth0.host : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"host","hash":{},"data":data}) : helper)))
    + "', {'reconnection': true,'reconnectionDelay': 500,'maxReconnectionAttempts':Infinity});\n        registerEvents();\n    }\n\n    // Check if player is active in game\n    socket.emit('login:active', {\n      gameId: sessionStorage.getItem('gameCode'), \n      username: sessionStorage.getItem('username'),\n      uid: sessionStorage.getItem('uUID')\n    });\n\n}\n\n/**\n * Listen for forms that dispatch socket events.\n *\n * ### Examples:\n *\n * @class global\n */\n$(document).on('click', '.form .submit', function(evt) {\n    \n    var event = $(this).data().event;\n    var pkg = getFormData($(this));\n\n    // If there is a session flag ('flag:value'), set it\n    // TODO: Why?\n    // var sessionFlag = $(this).data().sessionFlagsessionFlag;\n    // if(sessionFlag)\n    //     sessionStorage.setItem(sessionFlag.split(':')[0], sessionFlag.split(':')[1]);\n\n    // Emit event to socket\n    socket.emit(event, emitData(pkg));\n\n    // If autohide defined for this form, remove the element defined by 'data-hide' on the '#submitted' dom\n    if($(this).data().autohide) {\n        $('#' + $('#submitted').data('hide')).remove();\n        $('#submitted').show();\n    }\n\n    // Disable form button unless explicitly prevented, and show loading...\n    if(!$(this).data().keep_enabled) {\n        $(evt.currentTarget).attr('disabled', 'disabled');\n        loadToggle(true);\n    }\n\n});\n\n/* \n Logs player into game with room code and name\n*/\n$(document).on('click', '.btn.game_login', function(evt) {\n\n    var data = getFormData($(this));\n\n    // Create uid for player\n    var playerUID = Math.floor(Math.pow(10, 10-1) + Math.random() * (Math.pow(10, 10) - Math.pow(10, 10-1) - 1));\n    sessionStorage.setItem('uUID', playerUID);\n\n    // Disable button and show loading modal\n    $(evt.currentTarget).attr('disabled', 'disabled');\n    $('#loading-modal').fadeIn(250);\n\n    $.post(\n        \"/game\",\n        data,\n        function( data ) {\n\n            $('.form input').removeClass('invalid');\n\n            if(data.error_code) {\n\n                switch(data.error_code) {\n\n                    case 'game_not_found': \n                        $('.form #class_code').addClass('invalid');\n                        \n                        // Session does not exist, make sure to clear data from storage\n                        sessionStorage.removeItem('gameCode');\n                        sessionStorage.removeItem('playerSubmission');\n                        break;\n\n                    case 'no_username':\n                    case 'username_taken':\n                        $('.form #player_name').addClass('invalid');\n                        break;\n\n                    case 'game_active': \n                        $('.form #class_code').addClass('invalid');\n                        break;\n\n                }\n    \n                $('.btn.game_login').removeAttr('disabled');\n                $('.form .error').text(data.msg).fadeIn();\n                loadToggle(false, true);\n\n                return;\n\n            }\n\n            data.uid = playerUID;\n            playerLogin(data);                          \n\n        }\n    );\n\n});\n\n// Check if this client is logged in on server\ncheckIfLoggedIn();\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"group/monitor",{"name":"ifeq","hash":{},"fn":container.program(3, data, 0),"inverse":container.program(6, data, 0),"data":data})) != null ? stack1 : "")
    + "\nfunction registerEvents() {\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"development",{"name":"ifeq","hash":{},"fn":container.program(10, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n    $.each(eventIds, function(index, id) {\n      \n      socket.on(id, function(eventData) {\n\n"
    + ((stack1 = (helpers.ifnoteq || (depth0 && depth0.ifnoteq) || alias2).call(alias1,(depth0 != null ? depth0.environment : depth0),"production",{"name":"ifnoteq","hash":{},"fn":container.program(12, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "            \n            socketEvents(id, eventData);\n\n            if(typeof(gameEvents) == \"function\")\n                gameEvents(id, eventData);\n\n        });\n\n    });\n\n}\n\n\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"index",{"name":"ifeq","hash":{},"fn":container.program(14, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\n// /play URL\n"
    + ((stack1 = (helpers.ifeq || (depth0 && depth0.ifeq) || alias2).call(alias1,(depth0 != null ? depth0.section : depth0),"play",{"name":"ifeq","hash":{},"fn":container.program(16, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"usePartial":true,"useData":true});
})();