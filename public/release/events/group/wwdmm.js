"use strict";var clockInterval,resultsAnimSlider,topBar=$("#top-header").detach();topBar.prependTo("body");var gameEvents=function(a,b){function c(){$("#submissions").fadeOut(500).remove();var a=new TimelineLite({onComplete:function(){d()}});a.from($("#scores"),1,{autoAlpha:0}).add("scores").to($("#scores"),1,{autoAlpha:0,scale:0,display:"none",ease:Bounce.easeOut},"scores+=4")}function d(){var a=new TimelineLite({onComplete:function(){e()}});a.to($("#round-header"),.5,{autoAlpha:0,y:"0%",display:"none"}).add("header").fromTo($("#leaderboard-header"),.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",display:"block"},"header+=.6").from($("#leaderboard"),1,{autoAlpha:0}).add("leaderboard").to($("#leaderboard"),1,{autoAlpha:0,scale:0,display:"none",ease:Bounce.easeOut},"leaderboard+=4")}function e(){var a=new TimelineLite;if($("#next-round")[0]){a.to($("#leaderboard-header"),.5,{autoAlpha:0,y:"50%",display:"none"}).add("header").fromTo($("#next-round-header"),.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",display:"block"},"header+=.6");var b=10,c=new ProgressBar.Circle("#next-round #countdown",{color:"#fff",duration:1e3*b,easing:"easeInOut",strokeWidth:6,trailColor:"#ffc000",trailWidth:4.8,fill:"#fff",text:{value:b+"",className:"text"}}),d=$("#next-round #countdown .text"),e=setInterval(function(){b--,TweenLite.to($(d),.1,{scale:0}),$(d).text(b),TweenLite.from($(d),.1,{scale:0}),0==b&&(socket.emit("game:next_round",emitData(null)),clearInterval(e))},1e3);c.animate(1),TweenLite.from($("#next-round, #game-ended"),1,{autoAlpha:0,scale:0})}else{var b=10;a.to($("#leaderboard-header"),.5,{autoAlpha:0,y:"0%",display:"none"}).add("header").fromTo($("#winners-header"),.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",display:"block"},"header+=.6").from($("#winners-circle"),1,{autoAlpha:0}),setInterval(function(){b--,0==b&&(location.href="\\")},1e3)}}switch(a){case"game:countdown":clockInterval&&clearInterval(clockInterval);var f=b.duration,g=$(".countdown #countdown");clockInterval=setInterval(function(){f--;var a=secondsToHms(f);$(g).html(a),0===f&&clearInterval(clockInterval)},1e3);break;case"meme:topic":updateGameContent(b);break;case"meme:voting":updateGameContent(b),$.each($(".meme-text"),function(a,b){shrinkToFill(b,340,46)});break;case"meme:results":updateGameContent(b);var h=new TimelineLite({onComplete:function(){c()}});h.from($("#submissions"),1,{autoAlpha:0}).add("submissions");var i=$("#submissions .submission");_.each(i,function(a,b){h.from(a,1,{y:0,scale:0,autoAlpha:0,ease:Ease.easeOut},"+=.5").from($(a).find(".meme"),1,{y:100,scale:0,autoAlpha:0,ease:Ease.easeOut},"+=.5").from($(a).find(".votes-box"),.5,{y:100,scale:0,autoAlpha:0,ease:Ease.easeOut},"+=.5").staggerFrom($(a).find(".votes-box .vote"),.3,{scale:0,autoAlpha:0,ease:Bounce.easeOut},.3,"+=.4").staggerFrom($(a).find(".votes-box .vote .score"),1,{scale:0,autoAlpha:0,rotation:360,ease:Elastic.easeOut},1,"+=.4").from($(a).find(".name.submitter"),1,{y:100,scale:0,autoAlpha:0,ease:Ease.easeOut},"+=2").from($(a).find(".likes-box"),.5,{y:100,scale:0,autoAlpha:0,ease:Ease.easeOut},"+=.5").staggerFrom($(a).find(".likes-box .vote"),.3,{scale:0,autoAlpha:0,ease:Bounce.easeOut},.3,"+=.4").staggerFrom($(a).find(".likes-box .vote .score"),1,{scale:0,autoAlpha:0,rotation:-180,ease:Elastic.easeOut},1,"+=.4").to(a,1,{y:0,scale:0,autoAlpha:0,display:"none",ease:Ease.easeIn},"+=4")}),$("#slider-gsap").length&&(resultsAnimSlider=new GSAPTLSlider(h,"slider-gsap",{width:600}))}};