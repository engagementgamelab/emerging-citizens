"use strict";function showScores(){var a=new TimelineLite({paused:!0,onComplete:function(){nextRound()}});$("#hashtags").remove(),void 0!==hashtagsAnimSlider&&null!==hashtagsAnimSlider&&hashtagsAnimSlider.clear(),a.from($("#scores"),1.5,{autoAlpha:0,ease:Bounce.easeOut}).staggerFrom($("#scores .left .player"),1,{xPercent:-100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut},1).staggerFrom($("#scores .right .player"),1,{xPercent:100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut,delay:.3},1,"players").to($("#scores"),1,{autoAlpha:0,display:"none",delay:3});var b=$(".score-box")[0];$(b).addClass("winner"),void 0!==$("#winners-circle")[0]&&a.from($("#winners-circle"),1.5,{scale:.5,autoAlpha:0,ease:Bounce.easeOut}).staggerTo($(".score-box").get().reverse,1,{xPercent:-100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut,delay:5},.3).staggerFrom($(".score-box").get().reverse(),1.5,{xPercent:100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut},2).to($("#winners-circle"),1,{autoAlpha:0,display:"none",delay:5}),a.to($("#leaderboard"),1.5,{autoAlpha:1,display:"block",ease:Bounce.easeOut}).staggerFrom($("#leaderboard .left .player"),1,{xPercent:-100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut},.5).staggerFrom($("#leaderboard .right .player"),1,{xPercent:100,force3D:!0,autoAlpha:0,ease:Elastic.easeOut,delay:.3},.5).to($("#leaderboard"),1,{autoAlpha:0,yPercent:100,display:"none",delay:5}),$("#slider-gsap").length&&(hashtagsAnimSlider=new GSAPTLSlider(a,"slider-gsap",{width:600})),a.play()}function nextRound(){if($("#scores, #winners-circle, #leaderboard").remove(),void 0!==$("#next-round")[0])var a=10,b=new ProgressBar.Circle(".last #countdown",{color:"#fff",duration:1e3*a,easing:"easeInOut",strokeWidth:6,trailColor:"#f4f4f4",trailWidth:.8,fill:"#00c5c2",text:{value:a+"",className:"text"}}),c=$(".last #countdown .text"),d=setInterval(function(){a--,TweenLite.to($(c),.1,{scale:0}),$(c).text(a),TweenLite.from($(c),.1,{scale:0}),0==a&&($("#next-round")[0]?(socket.emit("game:next_round",emitData(null)),clearInterval(d)):location.href="\\")},1e3);TweenLite.from($("#next-round, #game-ended"),1,{autoAlpha:0,scale:0}),b.animate(1)}var hashtagsAnimSlider,gameEvents=function(a,b){switch(a){case"hashtag:submitted":case"hashtags:received":updateGameContent(b);var c=new TimelineLite({paused:!0});$("#hashtag-submissions-prompt").show(),c.from($("#hashtag-submissions-prompt"),1,{y:-200,autoAlpha:0,ease:Elastic.easeOut}).staggerFrom($("#hashtag-submissions .leftmost .hashtag"),1,{xPercent:-100,autoAlpha:0,ease:Elastic.easeOut},.5).staggerFrom($("#hashtag-submissions .left .hashtag"),1,{yPercent:100,autoAlpha:0,ease:Elastic.easeOut},.5).staggerFrom($("#hashtag-submissions .right .hashtag"),1,{yPercent:100,autoAlpha:0,ease:Elastic.easeOut},.5).staggerFrom($("#hashtag-submissions .rightmost .hashtag"),1,{xPercent:100,autoAlpha:0,ease:Elastic.easeOut,delay:.3},.5),c.play();break;case"hashtag:success":var d=$(".player-static"),e=_.pluck(_.where(b,{submitted:!0}),"username");_.each(e,function(a,b){var c=a.length<=15?a:a.substring(0,15)+"...";$(d[b]).children(".icon").addClass("active"),$(d[b]).children(".nameplate").addClass("active").text(c)});break;case"hashtag:voted":var d=$(".player-static"),e=_.pluck(_.where(b,{voted:!0}),"username");_.each(e,function(a,b){var c=a.length<=15?a:a.substring(0,15)+"...";$(d[b]).children(".icon").addClass("active"),$(d[b]).children(".nameplate").addClass("active").text(c)});break;case"hashtags:results":updateGameContent(b);var f,g,h,i=new TimelineLite({paused:!0,onComplete:function(){showScores()}}),j=$("#hashtag-results .result.fake"),k=$("#hashtag-results .result.real");i.from($("#hashtags"),1.5,{top:-250,autoAlpha:0,ease:Bounce.easeOut}),_.each(j,function(a,b){f=$(a).find(".creator"),g=$(a).find(".creatorWrapper"),h=f.size(),i.from(a,1,{y:0,autoAlpha:0,ease:Bounce.easeOut}).staggerFrom($(a).find(".voter"),2,{scale:0,opacity:1,ease:Elastic.easeOut,onStart:function(){ion.sound.play("button_tiny")}},2,"+=0.5").fromTo(g,1,{scale:0,opacity:0,autoAlpha:0,delay:1},{scale:1,opacity:1,autoAlpha:1},1,"+=2.5"),h>1&&i.add(function(){$(g).cycle(),$(g).cycle("goto",0),$(g).cycle("pause")},1,"+=0.5").add(function(){$(g).cycle("resume")},"-=0.5"),i.staggerTo($(a).find(".voter .nameplate"),.2,{scale:0,autoAlpha:0,display:"none"},.2,"+=0.5").add(function(){$(a).find(".voterWrapper").cycle(),$(a).find(".voterWrapper").cycle("goto",0)},"+=1.0").to(a,1,{delay:3,y:250,autoAlpha:0,display:"none"})}),i.fromTo($(k),1,{delay:.5,y:-250,autoAlpha:0,ease:Bounce.easeOut},{y:0,autoAlpha:1},"real").fromTo($("#hashtag-results #prompt"),.5,{delay:0,y:0,autoAlpha:1,opacity:1,ease:Elastic.easeOut},{y:0,autoAlpha:1,opacity:1},2,"real +=0.5").from($(k).find(".hashtag"),1,{delay:.5,y:100,autoAlpha:0},"real +=1.0").staggerFrom($(k).find(".voter"),3,{delay:0,scale:0,opacity:1,ease:Elastic.easeOut,onStart:function(){ion.sound.play("button_tiny")}},2).staggerTo($(k).find(".voter .portrait"),1,{scale:0,autoAlpha:0,display:"none",ease:Elastic.easeOut},1,"=0").staggerFromTo($(k).find(".voter .points"),.5,{scale:0,opacity:0,display:"block"},{scale:1,opacity:1,display:"block"},.5,"-=0.5").to($("#hashtags"),1,{delay:2,y:-200,autoAlpha:0,display:"none",ease:Elastic.easeIn}),$("#slider-gsap").length&&(hashtagsAnimSlider=new GSAPTLSlider(i,"slider-gsap",{width:600})),i.play()}};