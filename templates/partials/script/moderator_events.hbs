{{!< default}}
{{!-- 
/**
 * Emerging Citizens
 * Developed by Engagement Lab, 2016
 * ==============
 * 
 * Script includes partial for MODERATOR socket.io events
 * ==========
 */
--}}			

var socketEvents = function(eventId, eventData) {
		
	var currentPlayers = [];

    switch (eventId) {

        case 'connect':

				   // Connected, let's sign-up for to receive messages for this room
				   socket.emit('room', emitData('moderator'));

            break;

        case 'players:update':

				  	currentPlayers = _.pluck(eventData, 'username');
				    $('#playersContent').html(currentPlayers.join(' joined. <br />'));

            break;

        case 'game:start':
            
            $('#gameContent').html(eventData);

            break;

        case 'game:end':

            console.log('game was ended');

            break;

        case 'game:countdown':

            /*var minutes = Math.floor(eventData / 60);
            var seconds = eventData - minutes * 60;*/

            console.log('countdown' , eventData)

            var clock = $('#countdownTimer').FlipClock(eventData, {
                clockFace: 'MinuteCounter',
                countdown: true
            });

            break;

        case 'hashtag:submitted':
        case 'hashtags:received':

            $('#gameContent').html(eventData);

            break;

        case 'hashtags:reveal':

            $('#gameContent').html(eventData);

            //instantiate a TimelineLite    
            var tl = new TimelineLite();

            /* 
            var elements = $('.hashtagResponse');

            _.each(elements, function(el, index) {
                console.log(elements.length, index)
                setTimeout(function() {

                    $(el).show().css('opacity', '0');
                    $(el).fadeIn(500, function() {

                        setTimeout(function() {

                            $(el).fadeOut(500, function() { $(el).hide(); });

                        }, 6000);

                    });
                
                }, 8000 * index);
            });*/
            
            $('#countdownTimer').hide();

            var slider = $('.my-slider').unslider({arrows: false, autoplay: true, delay: 7000, speed: 1000, nav: false});
            var slideCount = $('.unslider-carousel li').length;

            slider.on('unslider.change', function(event, index, slide) {
                if(index == slideCount-1)
                    slider.stop();
            });

            break;

    }
    
};